(window.webpackJsonp=window.webpackJsonp||[]).push([[24],{312:function(a,t,e){"use strict";e.r(t);var s=e(8),r=Object(s.a)({},(function(){var a=this,t=a._self._c;return t("ContentSlotsDistributor",{attrs:{"slot-key":a.$parent.slotKey}},[t("h1",{attrs:{id:"install-helm-flux"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#install-helm-flux"}},[a._v("#")]),a._v(" Install Helm + Flux")]),a._v(" "),t("p",[a._v("Flux Architecture:")]),a._v(" "),t("p",[t("img",{attrs:{src:"https://github.com/fluxcd/flux/raw/18e5174581f44ed8c9a881dd5071179eed1ebf4d/docs/_files/flux-cd-diagram.png",alt:"Flux Architecture",title:"Flux Architecture"}})]),a._v(" "),t("p",[a._v("Create git repository which will be used by Flux in GitHub:")]),a._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[a._v("hub create "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-d")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"Flux repository for k8s-flux-istio-gitlab-harbor"')]),a._v(" "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-h")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"https://ruzickap.github.io/k8s-flux-istio-gitlab-harbor/"')]),a._v(" ruzickap/k8s-flux-repository\n")])])]),t("p",[a._v("Output:")]),a._v(" "),t("div",{staticClass:"language-text extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[a._v("A git remote named 'origin' already exists and is set to push to 'ssh://git@github.com/ruzickap/k8s-flux-istio-gitlab-harbor.git'.\nhttps://github.com/ruzickap/k8s-flux-repository\n")])])]),t("p",[a._v("Clone newly create git repository:")]),a._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("if")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("!")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-n")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"'),t("span",{pre:!0,attrs:{class:"token variable"}},[t("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$(")]),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("grep")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"^github.com "')]),a._v(" ~/.ssh/known_hosts"),t("span",{pre:!0,attrs:{class:"token variable"}},[a._v(")")])]),a._v('"')]),a._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("then")]),a._v(" ssh-keyscan github.com "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">>")]),a._v(" ~/.ssh/known_hosts "),t("span",{pre:!0,attrs:{class:"token operator"}},[t("span",{pre:!0,attrs:{class:"token file-descriptor important"}},[a._v("2")]),a._v(">")]),a._v("/dev/null"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("fi")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("git")]),a._v(" config "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--global")]),a._v(" user.email "),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"petr.ruzicka@gmail.com"')]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("git")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-C")]),a._v(" tmp clone git@github.com:ruzickap/k8s-flux-repository.git\n")])])]),t("p",[a._v("Output:")]),a._v(" "),t("div",{staticClass:"language-text extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[a._v("Cloning into 'k8s-flux-repository'...\nwarning: You appear to have cloned an empty repository.\n")])])]),t("p",[a._v("Create initial flux repository structure and add it into the git repository:")]),a._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[a._v("cp")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-v")]),a._v(" files/flux-repository/README.md tmp/k8s-flux-repository/\n"),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("mkdir")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-v")]),a._v(" tmp/k8s-flux-repository/"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),a._v("namespaces,releases,workloads"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),a._v("\n\n"),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("git")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-C")]),a._v(" tmp/k8s-flux-repository "),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("add")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v(".")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("git")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-C")]),a._v(" tmp/k8s-flux-repository commit "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-m")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"Initial commit"')]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("git")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-C")]),a._v(" tmp/k8s-flux-repository push "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-q")]),a._v("\n")])])]),t("p",[a._v("Output:")]),a._v(" "),t("div",{staticClass:"language-text extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[a._v("'files/flux-repository/README.md' -> 'tmp/k8s-flux-repository/README.md'\nmkdir: created directory 'tmp/k8s-flux-repository/namespaces'\nmkdir: created directory 'tmp/k8s-flux-repository/releases'\nmkdir: created directory 'tmp/k8s-flux-repository/workloads'\n[master (root-commit) 01ec748] Initial commit\n 1 file changed, 1 insertion(+)\n create mode 100644 README.md\n")])])]),t("h2",{attrs:{id:"install-helm"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#install-helm"}},[a._v("#")]),a._v(" Install Helm")]),a._v(" "),t("p",[a._v("Install "),t("a",{attrs:{href:"https://helm.sh/",target:"_blank",rel:"noopener noreferrer"}},[a._v("Helm"),t("OutboundLink")],1),a._v(" binary:")]),a._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[a._v("curl")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-s")]),a._v(" https://raw.githubusercontent.com/helm/helm/master/scripts/get "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("|")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("bash")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-s")]),a._v(" -- "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--version")]),a._v(" v2.14.3\n")])])]),t("p",[a._v("Output:")]),a._v(" "),t("div",{staticClass:"language-text extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[a._v("Helm v2.14.3 is already v2.14.3\nRun 'helm init' to configure helm.\n")])])]),t("p",[a._v("Create a service account and a cluster role binding for Tiller:")]),a._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[a._v("kubectl "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-n")]),a._v(" kube-system create sa tiller\n\nkubectl create clusterrolebinding tiller-cluster-rule "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n    "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--clusterrole")]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("cluster-admin "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n    "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--serviceaccount")]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("kube-system:tiller\n")])])]),t("p",[a._v("Output:")]),a._v(" "),t("div",{staticClass:"language-text extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[a._v("serviceaccount/tiller created\nclusterrolebinding.rbac.authorization.k8s.io/tiller-cluster-rule created\n")])])]),t("p",[a._v("Deploy Tiller in "),t("code",[a._v("kube-system")]),a._v(" namespace:")]),a._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[a._v("helm init --skip-refresh "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--upgrade")]),a._v(" --service-account tiller --history-max "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("10")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--wait")]),a._v("\n")])])]),t("p",[a._v("Output:")]),a._v(" "),t("div",{staticClass:"language-text extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[a._v("Creating /home/pruzicka/.helm\nCreating /home/pruzicka/.helm/repository\nCreating /home/pruzicka/.helm/repository/cache\nCreating /home/pruzicka/.helm/repository/local\nCreating /home/pruzicka/.helm/plugins\nCreating /home/pruzicka/.helm/starters\nCreating /home/pruzicka/.helm/cache/archive\nCreating /home/pruzicka/.helm/repository/repositories.yaml\nAdding stable repo with URL: https://kubernetes-charts.storage.googleapis.com\nAdding local repo with URL: http://127.0.0.1:8879/charts\n$HELM_HOME has been configured at /home/pruzicka/.helm.\n\nTiller (the Helm server-side component) has been installed into your Kubernetes Cluster.\n\nPlease note: by default, Tiller is deployed with an insecure 'allow unauthenticated users' policy.\nTo prevent this, run `helm init` with the --tiller-tls-verify flag.\nFor more information on securing your installation see: https://docs.helm.sh/using_helm/#securing-your-helm-installation\n")])])]),t("p",[a._v("Check if the tiller was installed properly:")]),a._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[a._v("kubectl get pods "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-l")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("app")]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("helm "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-n")]),a._v(" kube-system\n")])])]),t("p",[a._v("Output:")]),a._v(" "),t("div",{staticClass:"language-text extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[a._v("NAME                             READY   STATUS    RESTARTS   AGE\ntiller-deploy-7b8b4499b5-cs6zf   1/1     Running   0          11s\n")])])]),t("h2",{attrs:{id:"install-flux"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#install-flux"}},[a._v("#")]),a._v(" Install Flux")]),a._v(" "),t("p",[a._v("Add the Flux repository:")]),a._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[a._v("helm repo "),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("add")]),a._v(" fluxcd https://charts.fluxcd.io\nhelm update\n")])])]),t("p",[a._v("Output:")]),a._v(" "),t("div",{staticClass:"language-text extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[a._v('"fluxcd" has been added to your repositories\nCommand "update" is deprecated, use \'helm repo update\'\n\nHang tight while we grab the latest from your chart repositories...\n...Skip local chart repository\n...Successfully got an update from the "fluxcd" chart repository\n...Successfully got an update from the "stable" chart repository\nUpdate Complete.\n')])])]),t("p",[a._v("Apply the Helm Release CRD:")]),a._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[a._v("kubectl apply "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-f")]),a._v(" https://raw.githubusercontent.com/fluxcd/flux/helm-0.10.1/deploy-helm/flux-helm-release-crd.yaml\n")])])]),t("p",[a._v("Output:")]),a._v(" "),t("div",{staticClass:"language-text extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[a._v("customresourcedefinition.apiextensions.k8s.io/helmreleases.flux.weave.works created\n")])])]),t("p",[a._v("Install Flux:")]),a._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[a._v("helm "),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("install")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--name")]),a._v(" flux "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--namespace")]),a._v(" flux "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--wait")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--version")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("0.12")]),a._v(".0 fluxcd/flux "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n  "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--set")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("git.email")]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"petr.ruzicka@gmail.com"')]),a._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n  "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--set")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("git.url")]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("git@github.com:ruzickap/k8s-flux-repository "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n  "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--set")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("git.user")]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"Flux"')]),a._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n  "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--set")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("helmOperator.create")]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("true "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n  "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--set")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("helmOperator.createCRD")]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("false "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n  "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--set")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("registry.insecureHosts")]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"harbor.'),t("span",{pre:!0,attrs:{class:"token variable"}},[a._v("${MY_DOMAIN}")]),a._v('"')]),a._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n  "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--set")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("registry.pollInterval")]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"10s"')]),a._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n  "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--set")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("syncGarbageCollection.enabled")]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("true\n")])])]),t("p",[a._v("Output:")]),a._v(" "),t("div",{staticClass:"language-text extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[a._v("NAME:   flux\nLAST DEPLOYED: Thu Aug 29 09:39:10 2019\nNAMESPACE: flux\nSTATUS: DEPLOYED\n\nRESOURCES:\n==> v1/ConfigMap\nNAME              DATA  AGE\nflux-kube-config  1     16s\n\n==> v1/Deployment\nNAME                READY  UP-TO-DATE  AVAILABLE  AGE\nflux                1/1    1           1          16s\nflux-helm-operator  1/1    1           1          16s\nflux-memcached      1/1    1           1          16s\n\n==> v1/Pod(related)\nNAME                                 READY  STATUS   RESTARTS  AGE\nflux-bbb76576-8clvg                  1/1    Running  0         16s\nflux-helm-operator-6877b9f564-rt5rl  1/1    Running  0         16s\nflux-memcached-88db78d9d-vnrl7       1/1    Running  0         16s\n\n==> v1/Secret\nNAME             TYPE    DATA  AGE\nflux-git-deploy  Opaque  1     16s\n\n==> v1/Service\nNAME            TYPE       CLUSTER-IP      EXTERNAL-IP  PORT(S)    AGE\nflux            ClusterIP  100.70.220.201  &lt;none>       3030/TCP   16s\nflux-memcached  ClusterIP  100.64.195.153  &lt;none>       11211/TCP  16s\n\n==> v1/ServiceAccount\nNAME  SECRETS  AGE\nflux  1        16s\n\n==> v1beta1/ClusterRole\nNAME  AGE\nflux  16s\n\n==> v1beta1/ClusterRoleBinding\nNAME  AGE\nflux  16s\n\n\nNOTES:\nGet the Git deploy key by either (a) running\n\n  kubectl -n flux logs deployment/flux | grep identity.pub | cut -d '\"' -f2\n\nor by (b) installing fluxctl through\nhttps://github.com/weaveworks/flux/blob/master/docs/references/fluxctl.md#installing-fluxctl\nand running:\n\n  fluxctl identity\n")])])]),t("p",[a._v("Install fluxcli:")]),a._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[a._v("sudo")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("wget")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-q")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-c")]),a._v(" https://github.com/fluxcd/flux/releases/download/1.14.0/fluxctl_linux_amd64 "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-O")]),a._v(" /usr/local/bin/fluxctl\n"),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("sudo")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("chmod")]),a._v(" a+x /usr/local/bin/fluxctl\n")])])]),t("p",[a._v("Set the namespace ("),t("code",[a._v("flux")]),a._v(") where flux was installed for running "),t("code",[a._v("fluxctl")]),a._v(":")]),a._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("export")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("FLUX_FORWARD_NAMESPACE")]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("flux\n")])])]),t("p",[a._v("Obtain the ssh public key through "),t("code",[a._v("fluxctl")]),a._v(":")]),a._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[a._v("fluxctl identity\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("if")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-x")]),a._v(" /usr/bin/chromium-browser "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("then")]),a._v(" chromium-browser https://github.com/ruzickap/k8s-flux-repository/settings/keys/new "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("&")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("fi")]),a._v("\n")])])]),t("p",[a._v("Output:")]),a._v(" "),t("div",{staticClass:"language-text extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[a._v("ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABAQCyGvcJPcFxvsc9SHtJiOt7G6pvNQgmcf+PIIfy6PoEvXK2naXmKw68+dtKeIoMzvp63QxoNB+B6qamMbkWqaVCjS4glAXKmf68k/eCazcPNZaQRmL/YUmgmyZ8AF02fDmM/RQMz/2hUtUE6UYs/T5vYUdDwYb09nOmVMgclY6jbmQ4b0OgG18p6RnNYtJ4wysC6+wEoy5xVljKWRE03UxD3pJbVdk5KPcJ/mnX44tUwU/oE/Ezz7LaMjVXnXns8zKu3LOAIeolcCFVJUbUMQhOuvwrXp+Sag1VV3OG4Uy6P3/0wIajEumzHO4GvpAEJ1F1Ny4b692wP/TdUX/WWAIr\n")])])]),t("p",[a._v('Add the ssh key to the GitHub "'),t("a",{attrs:{href:"https://github.com/ruzickap/k8s-flux-repository",target:"_blank",rel:"noopener noreferrer"}},[a._v("https://github.com/ruzickap/k8s-flux-repository"),t("OutboundLink")],1),a._v('"\n-> "Settings" -> "Deploy keys" -> "Add new" -> "Allow write access"')]),a._v(" "),t("p",[t("img",{attrs:{src:"https://raw.githubusercontent.com/fluxcd/flux/18e5174581f44ed8c9a881dd5071179eed1ebf4d/docs/_files/flux.svg?sanitize=true",alt:"Flux logo",title:"Flux logo"}})]),a._v(" "),t("hr")])}),[],!1,null,null,null);t.default=r.exports}}]);